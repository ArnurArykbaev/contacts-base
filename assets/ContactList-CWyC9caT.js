import{d as B,r as w,a as r,o as n,c as p,b as _,e as I,f as x,w as u,g as c,u as L,h as b,i as $,F as V,t as S,j as v,k as E}from"./index-DThZWDsN.js";import{u as D}from"./contacts-BZgGlNpP.js";const F=async()=>{try{const o=localStorage.getItem("contacts");return o?JSON.parse(o):[]}catch(o){console.error("getContacts",o)}},M={id:"search-bar"},R=B({__name:"SearchBar",props:{modelValue:String},emits:["update:modelValue","clear"],setup(o,{emit:f}){const i=f,k=o,e=w(!1),d=l=>{console.log("e",e.value,k.modelValue.length),e.value===!1&&l.target.value.length>=1?e.value=!0:e.value===!0&&l.target.value.length===0&&(e.value=!1),i("update:modelValue",l.target.value)},C=()=>{e.value=!1,i("update:modelValue","")},y=()=>{e.value===!0&&k.modelValue.length===0&&(e.value=!1)};return(l,t)=>{const a=r("a-input"),h=r("a-button"),g=r("router-link");return n(),p("div",M,[_(a,{class:"search-input",value:o.modelValue,onInput:d,onBlur:y,placeholder:"Search"},null,8,["value"]),I("div",null,[e.value?(n(),x(h,{key:0,onClick:C},{default:u(()=>[c("Clear")]),_:1})):(n(),x(g,{key:1,to:"/create/"},{default:u(()=>[_(h,null,{default:u(()=>[c("New User")]),_:1})]),_:1}))])])}}}),U={id:"search-list"},j={class:"search-block"},P=B({__name:"ContactList",setup(o){const f=L(),i=D(),k=b(()=>i.getContacts()),e=w([]),d=w(""),C=[{title:"Name",dataIndex:"name",key:"name"},{title:"Phone",dataIndex:"phone",key:"phone"},{title:"Email",dataIndex:"email",key:"email"},{title:"",dataIndex:"edit",key:"edit"}],y=t=>{f.push(`/contact/${t.id}`)},l=b(()=>{const t=d.value.toLowerCase();return k.value.filter(a=>a.name.toLowerCase().includes(t)||(a.phone+"").includes(t)||a.email.toLowerCase().includes(t))});return $(async()=>{const t=await F();i.setContacts(t),e.value=t}),(t,a)=>{const h=r("router-link"),g=r("a-row"),N=r("a-table");return n(),p("div",U,[I("div",j,[_(R,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=s=>d.value=s)},null,8,["modelValue"]),_(N,{dataSource:l.value,columns:C},{bodyCell:u(({column:s,record:m})=>[_(g,{onClick:A=>y(m)},{default:u(()=>[s.key==="name"?(n(),p(V,{key:0},[c(S(m.name),1)],64)):v("",!0),s.key==="phone"?(n(),p(V,{key:1},[c(S(m.phone),1)],64)):v("",!0),s.key==="email"?(n(),p(V,{key:2},[c(S(m.email),1)],64)):v("",!0),s.key==="edit"?(n(),x(h,{key:3,onClick:a[1]||(a[1]=E(()=>{},["stop"])),to:`/edit/${m.id}`},{default:u(()=>[c("Edit")]),_:2},1032,["to"])):v("",!0)]),_:2},1032,["onClick"])]),_:1},8,["dataSource"])])])}}});export{P as default};
